(window["webpackJsonpfire-todos"]=window["webpackJsonpfire-todos"]||[]).push([[0],{188:function(e,t,n){e.exports=n(363)},362:function(e,t,n){},363:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(76),s=n(102),l=n(52),u=(n(193),n(83)),d="/signin",f="/",p=n(19),h=n(21),m=n(23),b=n(22),y=n(24),v=n(32),g=n(36),O=n(59),j=r.a.createContext(null),E=n(69),k=n.n(E),w=n(103),S=n(85),C=n.n(S),L=(n(199),n(201),n(168)),x=n.n(L);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var D={apiKey:"AIzaSyCYLVxexA8tu5qGjgV16EK3gWqDAkHtrRE",authDomain:"fir-todos-60fd4.firebaseapp.com",databaseURL:"https://fir-todos-60fd4.firebaseio.com",projectId:"fir-todos-60fd4"},P=function(e){return function(t){return r.a.createElement(j.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},A=function e(){var t=this;Object(p.a)(this,e),this.todos=function(e){return t.db.ref("/todos/".concat(e))},this.lists=function(e){return t.db.ref("/lists/".concat(e))},this.users=function(){return t.db.ref("/users")},this.createUser=function(e,n){t.db.ref("/users/".concat(e)).once("value",(function(a){if(!a.val()){var r={name:"favourites",icon:"star",owner:e},c={name:"Due Date",icon:"time",owner:e};t.db.ref("/lists/".concat(e)).push(r),t.db.ref("/lists/".concat(e)).push(c),t.db.ref("/users/".concat(e)).set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n))}}))},this.onSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleAuth).then(function(){var e=Object(w.a)(k.a.mark((function e(n){var a,r,c,o,i,s,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.user,r=a.uid,c=a.email,o=a.displayName,i=a.photoURL,s=i){e.next=6;break}return e.next=5,x()(c);case 5:s=e.sent;case 6:l={name:o,uid:r,avatar:s,email:c},t.createUser(r,l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},this.onSignOut=function(){},this.selectTodo=function(e,n){return t.db.ref("/todos/".concat(e,"/").concat(n))},this.list=function(e,n){return t.db.ref("/lists/".concat(e,"/").concat(n))},this.addTodo=function(e,n,a){var r={title:a,completed:!1,lists:Object(O.a)({},n,!0)};t.db.ref("/todos/".concat(e)).push(r).then((function(a){return t.db.ref("/lists/".concat(e,"/").concat(n,"/todos/").concat(a.key)).set(!0)}))},this.deleteTodo=function(e,n,a){t.db.ref("/todos/".concat(e,"/").concat(n)).remove((function(){t.db.ref("/lists/".concat(e,"/").concat(a,"/todos/").concat(n)).set(null)}))},this.editTodo=function(e,n,a){t.db.ref("/todos/".concat(e,"/").concat(n)).update(a)},this.addList=function(e,n){var a={name:n};t.db.ref("/lists/".concat(e)).push(a)},this.deleteList=function(e,n){t.db.ref("/lists/".concat(e,"/").concat(n)).set(null,(function(){t.db.ref("/todos/".concat(e)).once("value",(function(a){var r=a.val();r&&Object.keys(r).filter((function(e){return r[e].lists&&r[e].lists[n]})).forEach((function(n){return t.db.ref("/todos/".concat(e,"/").concat(n,"/")).set(null)}))}))}))},C.a.initializeApp(D),this.db=C.a.database(),this.auth=C.a.auth(),this.googleAuth=new C.a.auth.GoogleAuthProvider},H=n(369),T=n(366),_=n(10),N=n(371),z=n(368),F=n(370),Q=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).submitHandler=function(e){e.preventDefault();var t=n.props,a=t.form,r=t.addTodo;a.validateFields((function(e,t){e||(r(t.title),a.setFields({title:""}))}))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(z.a,{onSubmit:this.submitHandler,style:{display:"flex"}},r.a.createElement(z.a.Item,null,r.a.createElement(_.a,{type:"plus-square",sytle:{size:"2em"}})),r.a.createElement(z.a.Item,null,e("title")(r.a.createElement(F.a,{placeholder:"Add Todo"}))))}}]),t}(a.Component),W=z.a.create({name:"addTodo"})(Q),U="SELECT_LIST",G="ON_SEARCH",M="CANCEL_SEARCH",R=function(e){return{type:U,listId:e}},V=n(180);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X={loading:!1,error:null,todoList:{},todos:[]},J=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state=B({},X),n.checkBoxHandler=function(e,t){var a=n.props.user,r=e.target.checked;n.props.firebase.editTodo(a,t,{completed:r})},n.deleteList=function(){var e=n.props,t=e.firebase,a=e.selectedList,r=e.selectList,c=e.user;t.deleteList(c,a),r("")},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.firebase,a=t.selectedList,r=t.user;this.setState({loading:!0}),a?n.list(r,a).on("value",(function(t){var c=B({},t.val(),{key:a});e.setState({todoList:c}),c.todos?n.todos(r).on("value",(function(t){var n=t.val();if(n){var a=Object.keys(n).filter((function(e){return c.todos.hasOwnProperty(e)})).map((function(e){return B({},n[e],{key:e})}));e.setState({todos:a,loading:!1})}})):e.setState({todos:[],loading:!1})})):this.setState(B({},X))}},{key:"componentWillUnmount",value:function(){this.props.firebase.todos(this.props.user).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.todoList,a=t.todos,c=t.loading,o=this.props,i=o.firebase,s=o.selectedList,l=o.user;return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(H.a,{title:n.name,extra:[r.a.createElement(V.Button,{key:"1",onClick:this.deleteList},"Delete List")]}),r.a.createElement(T.a,{itemLayout:"horizontal",footer:a&&r.a.createElement(W,{addTodo:this.props.firebase.addTodo.bind(null,l,n.key)}),dataSource:a,loading:c,renderItem:function(t){return r.a.createElement(T.a.Item,{key:t.key,actions:[r.a.createElement("a",{key:"list-loadmore-favourites",onClick:function(n){return e.props.firebase.deleteTodo(l,t.key,s)}},r.a.createElement(_.a,{type:"star"})),r.a.createElement("a",{key:"list-loadmore-delete",onClick:function(e){return i.deleteTodo(l,t.key,s)}},r.a.createElement(_.a,{type:"close-circle"}))]},r.a.createElement(T.a.Item.Meta,{title:t.title,avatar:r.a.createElement(N.a,{onChange:function(n){return e.checkBoxHandler(n,t.key)},checked:t.completed})}))}}))}}]),t}(a.Component),K=Object(v.a)(Object(g.b)(null,{selectList:R}),P)(J),Y=n(364),Z=n(141),$=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).submitHandler=function(e){var t=n.props,a=t.form,r=t.addList;e.preventDefault(),a.validateFields((function(e,t){e||(r(t.name),a.setFields({name:{value:""}}))}))},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(z.a,{layout:"inline",onSubmit:this.submitHandler,className:"add_list"},r.a.createElement(z.a.Item,{sytle:{padding:"10px",marginRight:"0px"}},r.a.createElement(_.a,{type:"plus"})),r.a.createElement(z.a.Item,null,e("name")(r.a.createElement(F.a,{placeholder:"Add List"}))))}}]),t}(a.Component),ee=z.a.create({name:"addList"})($),te=Y.a.Sider,ne=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={lists:null,error:null,loading:null},n.itemSelectHandler=function(e){},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;this.setState({loading:!0}),this.props.firebase.lists(t).on("value",(function(t){var n=t.val();if(n){var a=Object.keys(n).map((function(e){var t=n[e];return{key:e,icon:t.icon,name:t.name,user:t.user}}));e.setState({lists:a,loading:!1,error:!1})}}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.lists(this.props.user).off()}},{key:"render",value:function(){var e=this,t=this.state,n=t.lists;t.loading,t.error;return r.a.createElement(te,{width:300,style:{background:"#fff"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(Z.a,{mode:"inline",onSelect:function(t){var n=t.key;return e.props.selectList(n)}},n&&n.map((function(e){return r.a.createElement(Z.a.Item,{key:e.key},r.a.createElement(_.a,{type:e.icon||"unordered-list"}),e.name)}))),n&&r.a.createElement(Z.a,{selectable:!1},r.a.createElement(Z.a.Item,null,r.a.createElement(ee,{addList:function(t){return e.props.firebase.addList(e.props.user,t)}}))))}}]),t}(a.Component),ae=Object(v.a)(Object(g.b)(null,{selectList:R}),P)(ne),re=n(179),ce=(F.a.Search,function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).changeHandler=function(e){var t=n.props.form,a=t.validateFields;t.setFieldsValue;a("search",(function(e,t){e||n.props.onSearch(t.search)}))},n.submitHandler=function(){},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){console.log(this.props.searchQuery);var e=this.props.form.getFieldDecorator;return r.a.createElement(z.a,{layout:"inline",onChange:this.changeHandler},r.a.createElement(z.a.Item,null,e("search",{setFieldsValue:this.props.searchQuery,trigger:"onChange"})(r.a.createElement(F.a,{prefix:r.a.createElement(_.a,{type:"search",style:{color:"#fff"}}),placeholder:"input search text",className:"search_bar",style:{width:200},allowClear:!0}))))}}]),t}(a.Component)),oe=Object(v.a)(Object(g.b)((function(e){return{searchQuery:e.searchQuery}}),{onSearch:function(e){return{type:G,query:e}}}),z.a.create({name:"searchForm"}))(ce),ie=n(183),se=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onClickHandler=function(){n.props.firebase.auth.signOut()},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(ie.a,{shape:"round",onClick:this.onClickHandler,icon:"logout",size:"large"},"Logout")}}]),t}(r.a.Component),le=P(se),ue=function(e){var t=function(t){function n(){var e,t;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=Object(m.a)(this,(e=Object(b.a)(n)).call.apply(e,[this].concat(r)))).state={user:null},t}return Object(y.a)(n,t),Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.firebase,a=t.history;n.auth.onAuthStateChanged((function(t){t?(localStorage.setItem("user",t.uid),e.setState({user:t.uid})):(localStorage.removeItem("user"),a.push(d))}))}},{key:"render",value:function(){var t=this.state.user;return t?r.a.createElement(e,Object.assign({user:t},this.props)):null}}]),n}(r.a.Component);return Object(v.a)(P,l.e)(t)},de=Y.a.Header,fe=ue(function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={user:null},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.firebase,a=t.user;n.db.ref("/users/".concat(a)).on("value",function(){var t=Object(w.a)(k.a.mark((function t(n){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.val(),e.setState({user:a});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement(de,{className:"header",style:{display:"flex",alignItems:"center",width:"100%"}},r.a.createElement(Z.a,{selectable:!1,theme:"dark",mode:"horizontal",style:{display:"flex",alignItems:"center",flex:100}},r.a.createElement(Z.a.Item,{style:{flex:1}},r.a.createElement("div",{className:"logo",style:{fontSize:"1.5em"}},"Todos")),r.a.createElement(Z.a.Item,{style:{flex:3}},r.a.createElement(oe,null)),r.a.createElement(Z.a.Item,{style:{display:"flex",alignItems:"center",justifyContent:"space-around",flex:1}},r.a.createElement("div",null,e&&r.a.createElement("h4",{style:{color:"#fff"}},e.name)),r.a.createElement("div",null,e&&r.a.createElement(re.a,{shape:"circle",src:e.avatar,icon:"user",size:"large"})),r.a.createElement("div",null,r.a.createElement(le,null)))))}}]),t}(a.Component)),pe=Y.a.Content,he=Y.a.Header,me=ue((function(e){return r.a.createElement(Y.a,{style:{height:"100vh"}},r.a.createElement(fe,null),r.a.createElement(Y.a,{theme:"dark"},r.a.createElement(ae,{user:e.user}),r.a.createElement(he,{style:{background:"#fff",padding:0}}),r.a.createElement(pe,{style:{margin:"24px 16px 0"}},r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:360}},e.children))))}));function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(n,!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={loading:!0,results:[]},ge=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state=ye({},ve),n.listOnClickHandler=function(e){var t=n.props,a=t.selectList,r=t.cancelSearch;a(e),r()},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.firebase,a=t.searchQuery,r=t.user;a&&n.todos(r).once("value",(function(t){var c=ye({},t.val()),o=Object.keys(c).map((function(e){return ye({},c[e],{key:e})})).filter((function(e){return e.title.includes(a)}));n.lists(r).once("value",(function(t){var n=t.val(),a=o.map((function(e){return ye({},e,{lists:Object.keys(e.lists).map((function(e){return{name:n[e].name,key:e}}))})}));e.setState({results:a,loading:!1})}))}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.firebase,n=(e.searchQuery,e.user);t.todos(n).off()}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchQuery,a=t.cancelSearch,c=this.state,o=c.loading,i=c.results;return r.a.createElement("div",null,r.a.createElement(H.a,{title:"Search Term: ".concat(n),extra:[r.a.createElement(ie.a,{key:"1",onClick:a},"Cancel Search")]}),r.a.createElement(T.a,{itemLayout:"horizontal",dataSource:i,loading:o,renderItem:function(t){return r.a.createElement(T.a.Item,{key:t.key,actions:t.lists.map((function(t){return r.a.createElement("a",{onClick:function(){return e.listOnClickHandler(t.key)}},t.name)}))},r.a.createElement(T.a.Item.Meta,{title:t.title}))}}))}}]),t}(a.Component),Oe=Object(v.a)(P,Object(g.b)(null,{selectList:R,cancelSearch:function(){return{type:M}}}))(ge),je=P(Oe),Ee=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={todoList:{}},n}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.selectedList,a=t.searchQuery,c=t.user;return e=n&&!a?r.a.createElement(K,{key:n,user:c,selectedList:n}):a?r.a.createElement(je,{key:a,user:c,searchQuery:a}):r.a.createElement("h1",null,"Home page"),r.a.createElement(me,null,e)}}]),t}(a.Component),ke=Object(v.a)(Object(g.b)((function(e){return{selectedList:e.selectedList,searchQuery:e.searchQuery}}),null),ue)(Ee),we=n(367),Se=n(365);function Ce(){var e=Object(i.a)(["\n\nflex-basis:400px;\nmin-height: 400px;\npadding:20px;\n"]);return Ce=function(){return e},e}function Le(){var e=Object(i.a)(["\nheight:100%;\nwidth:100%;\ndisplay:flex;\njustify-content:center;\nalign-items: center;\nbackground: #9053c7;\nbackground: -webkit-linear-gradient(-135deg, #c850c0, #4158d0);\nbackground: -o-linear-gradient(-135deg, #c850c0, #4158d0);\nbackground: -moz-linear-gradient(-135deg, #c850c0, #4158d0);\nbackground: linear-gradient(-135deg, #c850c0, #4158d0);\n"]);return Le=function(){return e},e}var xe=u.a.div(Le()),Ie=(u.a.div(Ce()),function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.firebase,n=e.history;t.auth.onAuthStateChanged((function(e){e&&(localStorage.setItem("user",e.uid),n.push(f))}))}},{key:"render",value:function(){var e=this.props.firebase;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"}},r.a.createElement(ie.a,{size:"large",shape:"round",onClick:e.onSignInWithGoogle,icon:"google-plus",className:"btn-google",type:"danger"},"Sign In With Google"),r.a.createElement(ie.a,{size:"large",shape:"round",onClick:e.onSignInWithGoogle,disabled:!0,className:"btn-facebook",type:"primary"},r.a.createElement(_.a,{type:"facebook",theme:"filled"}),"Sign In With Facebook"),r.a.createElement(ie.a,{size:"large",shape:"round",icon:"github",onClick:e.onSignInWithGoogle,disabled:!0,className:"btn-github"},"Sign In With Github"))}}]),t}(r.a.Component)),De=Object(v.a)(P,l.e)(Ie),Pe=function(){return r.a.createElement(xe,null,r.a.createElement(we.a,{style:{minHeight:"400px",flexBasis:"400px",textAlign:"center"},bodyStyle:{height:"100%"}},r.a.createElement("h1",null,r.a.createElement(_.a,{type:"edit"}),"Todos"),r.a.createElement(Se.a,null),r.a.createElement("h3",null,"Sign in using socials"),r.a.createElement(De,null)))};n(362);function Ae(){var e=Object(i.a)(["\nheight: 100vh;\n"]);return Ae=function(){return e},e}var He=u.a.div(Ae());var Te=function(){return r.a.createElement(He,null,r.a.createElement(s.a,null,r.a.createElement(l.a,{path:f,exact:!0,component:ke}),r.a.createElement(l.a,{path:d,component:Pe})))},_e=n(78),Ne=Object(_e.b)({selectedList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return t.listId}return e},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return t.query;case M:return"";default:return e}}}),ze=Object(_e.c)(Ne,{selectedList:"",searchQuery:""},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(j.Provider,{value:new A},r.a.createElement(g.a,{store:ze},r.a.createElement(Te,null))),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.2908d01d.chunk.js.map